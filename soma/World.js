!function(t,e,i){"use strict";async function n(t){const n=new e.GLTFLoader,s=await n.loadAsync(t);console.log("Model Data: ",s);return{luneModel:function(t){const e=t.scene.children[0],n=new i.MeshStandardMaterial({color:"#00C5C0",metalness:.5,roughness:.5});return t.scene.traverse((t=>{t.isMesh&&(t.material=n)})),e.rotate=!1,e.spin=!1,e.yRot=Math.PI/2,e.height=1,e.tick=t=>{e.spin&&(console.log("yRot: ",e.yRot),e.height>=.01?(e.rotation.y=Math.sin(e.yRot)*e.height,console.log("model rot: ",e.rotation.y),e.yRot+=2*t,e.height-=.002):e.height<=-.01?(e.rotation.y=Math.sin(e.yRot)*e.height,console.log("model rot: ",e.rotation.y),e.yRot-=2*t,e.height+=.002):e.spin=!1)},e.hit=()=>{console.log("Hero hit!")},e}(s)}}const s=(t,e,i)=>{e.aspect=t.clientWidth/t.clientHeight,e.updateProjectionMatrix(),i.setSize(t.clientWidth,t.clientHeight),i.setPixelRatio(window.devicePixelRatio)};class o{constructor(t,e,i){s(t,e,i),window.addEventListener("resize",(()=>{s(t,e,i),this.onResize()}))}onResize(){}}const c=new i.Clock;class r{constructor(t,e,i){this.camera=t,this.scene=e,this.renderer=i,this.updatables=[]}start(){this.renderer.setAnimationLoop((()=>{this.tick(),this.renderer.render(this.scene,this.camera)}))}stop(){this.renderer.setAnimationLoop(null)}tick(){const t=c.getDelta();for(const e of this.updatables)e.tick(t)}}class h{constructor(t,e,n){this.raycaster=new i.Raycaster,this.pickedObject=null,this.pickPosition={x:-1e5,y:-1e5},this.canvas=t,this.scene=e,this.camera=n,this.mouseDown=!1,window.addEventListener("mousedown",(t=>{this.mouseDown=!0,this.setPickPosition(t),this.pick()})),window.addEventListener("mouseup",(()=>{null!=this.pickedObject&&(this.pickedObject.parent.spin=!0,this.pickedObject=null),this.mouseDown=!1})),window.addEventListener("mousemove",(t=>{this.mouseDown&&null!=this.pickedObject&&(this.setPickPosition(t),this.rotateObject())})),window.addEventListener("mouseout",(()=>{this.clearPickPosition()})),window.addEventListener("mouseleave",(()=>{this.clearPickPosition()}))}setPickPosition(t){const e=this.canvas.getBoundingClientRect(),i=(t.clientX-e.left)*this.canvas.width/e.width,n=(t.clientY-e.top)*this.canvas.height/e.height;this.pickPosition.x=i/this.canvas.width*2-1,this.pickPosition.y=n/this.canvas.height*-2+1}clearPickPosition(){this.pickPosition.x=-1e5,this.pickPosition.y=-1e5}pick(){this.raycaster.setFromCamera(this.pickPosition,this.camera);const t=this.raycaster.intersectObjects(this.scene.children);t.length?(this.pickedObject=t[0].object,this.pickedObject.parent.hit()):console.log("Nothing hit!")}rotateObject(){this.pickedObject.parent.rotation.y=this.pickPosition.x,this.pickedObject.parent.height=this.pickPosition.x,console.log("Angle: ",this.pickedObject.parent.rotation.y)}}let a,l,d,p;t.World=class{options={luneModel:""};constructor(t,e){a=function(){const t=new i.PerspectiveCamera(75,1,.1,100);return t.position.set(0,0,10),t}(),l=function(){const t=new i.WebGLRenderer({antialias:!0});return t.physicallyCorrectLights=!0,t}(),d=function(){const t=new i.Scene;return t.background=new i.Color("gray"),t}(),p=new r(a,d,l),t.append(l.domElement),new h(l.domElement,d,a);const{mainLight:n,leftLight:s,rightLight:c}=function(){const t=new i.DirectionalLight("white",3);t.position.set(5,0,10),new i.DirectionalLightHelper(t);const e=new i.PointLight("#0000FF",8,5);e.position.set(-2,2,2),new i.PointLightHelper(e);const n=new i.PointLight("#00FEFE",3,5);return n.position.set(2,0,2),new i.PointLightHelper(n),{mainLight:t,leftLight:e,rightLight:n}}();d.add(n,s,c),new o(t,a,l)}async init(){const{luneModel:t}=await n(options.luneModel);p.updatables.push(t),d.add(t)}render(){l.render(d,a)}start(){p.start()}stop(){p.stop()}},Object.defineProperty(t,"__esModule",{value:!0})}({},GLTFLoader_js,THREE);
